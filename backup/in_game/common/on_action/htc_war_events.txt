# root = country, scope:target = location, scope:character = leading general character
on_siege_won = {
	on_actions = {
		port_conquest_occupied
	}
}

# root = country, scope:target = location, scope:character = leading general character
on_location_occupied = {
	on_actions = {
		port_conquest_occupied
	}
}

# root = country, scope:target = location, scope:character = leading general character
port_conquest_occupied = {
	effect = {
		# conquer from native
		if = {
			limit = {
				scope:target = {
					has_location_modifier = port_conquest_target_location
				}
				any_current_war = {
					casus_belli ?= casus_belli:cb_port_conquest
					is_an_attacker = root
					defender_leader = scope:target.owner
				}
			}
			every_current_war = {
				limit = {
					casus_belli ?= casus_belli:cb_port_conquest
					is_an_attacker = root
					defender_leader = scope:target.owner
				}
				white_peace = this
			}
			scope:target = {
				remove_location_modifier = port_conquest_target_location
				change_location_owner = root
				change_integration_level = colonized
			}
		}
	}
}