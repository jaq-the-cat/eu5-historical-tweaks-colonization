conquer_overseas_port = {
	type = diplomacy
	category = CATEGORY_HOSTILE_ACTIONS

	ai_tick = daily
	ai_tick_frequency = 360

	potential = {
		scope:actor = {
			or = {
				is_ai = no
				has_or_had_tag = POR
				has_or_had_tag = CAS
				has_or_had_tag = SPA
				has_or_had_tag = FRA
				has_or_had_tag = ENG
				has_or_had_tag = GBR
				has_or_had_tag = NED
			}
			or = {
				# renaissance
				has_advance = por_pursuing_waves
				has_advance = route_to_the_indies_advance
				# discovery
				has_advance = coastal_trade_routes_advance
				# reformation
				has_advance = global_trade_routes_advance
			}
		}
	}

	cooldown = { 
		type = conquer_overseas_port
		years = 5
	}

	allow = {}

	select_trigger = {
		looking_for_a = country
		target_flag = recipient
		interaction_source_list = {
			every_country = {
				limit = {
					not = { is_subject_type = colonial_nation }
					capital = {
						or = {
							# africa
							sub_continent = sub_continent:west_africa
							sub_continent = sub_continent:central_africa
							sub_continent = sub_continent:east_africa
							region = region:swahili_coast_region
							region = region:zimbabwe_region
							region = region:southern_africa_islands_region
							region = region:madagascar_region
							# middle east
							region = region:arabia_region
							# asia
							sub_continent = sub_continent:south_asia
							sub_continent = sub_continent:east_asia
							region = region:indonesia_region
							region = region:melanesia_region
						}
					}
				}
				add_to_list = source
			}
		}
		name = "choose_country"
		column = {
			data = name
		}
		column = {
			data = army_size
		}
		column = {
			data = regular_army_size
		}
		column = {
			data = navy_size
		}
		visible = {
			always = yes
		}
        enabled = {
			at_war = no
		}
		show_why_not_visible = yes
		show_why_not_enabled = yes
	}

	select_trigger = {
		looking_for_a = location
		source = recipient
		target_flag = target
		name = "conquer_overseas_port_select_location"
		none_available_msg_key = "conquer_overseas_port_no_locations"
		column = { data = name }
		column = { data = market }
		column = { data = development }
		default_sort = development
		visible = {
			is_coastal = yes
			within_colonial_range_of = root
		}
		enabled = {
			always = yes
		}
		show_why_not_visible = yes
		show_why_not_enabled = yes
	}

	ai_will_do = {
		if = {
			limit = {
				scope:actor = {	
					power_projection > scope:recipient.power_projection
					military_strength > scope:recipient.military_strength
					navy_size > scope:recipient.navy_size
					num_of_advances_researched > scope:recipient.num_of_advances_researched
				}
			}
			add = {
				value = 15
			}
		}
	}
	
	effect = {
		if = {
			limit = { exists = scope:target }
			scope:target = {
				add_location_modifier = {
					modifier = port_conquest_target_location
					mode = replace
					years = 10
				}
			}
			scope:actor = {
				declare_war_with_cb = {
					target = scope:recipient
					type = casus_belli:cb_port_conquest
					province = scope:target.province
				}
			}
		}
	}
}
