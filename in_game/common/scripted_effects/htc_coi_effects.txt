conquest_of_india_recalculate_strongest = {
    culture_group:indian_group = {
        ordered_country_in_culture_group = {
            limit = { is_subject = no }
            order_by = {
                add = { value = military_strength }
                add = { value = monthly_income_trade_and_tax }
            }
            max = 1
            check_range_bounds = no
            # save as strongest power
            situation:conquest_of_india = {
                set_variable = {
                    name = strongest_indian_power
                    value = prev
                }
                set_variable = {
                    name = sip_locations
                    value = 0
                }
            }
            # save number of locations in india
            sub_continent:south_asia = {
                every_location_in_sub_continent = {
                    limit = {
                        owner ?= {
                            top_overlord_or_this ?= situation:conquest_of_india.var:strongest_indian_power
                        }
                    }
                    situation:conquest_of_india = {
                        change_variable = {
                            name = sip_locations
                            add = 1
                        }
                    }
                }
            }
            # get percentage of total
            situation:conquest_of_india = {
                set_variable = {
                    name = sip_location_percentage
                    value = {
                        value = var:sip_locations
                        divide = 2587
                    }
                }
            }
        }
    }
    ordered_country = {
        limit = {
            exists = capital
            capital.continent = continent:europe
            is_subject = no
            has_presence_in = sub_continent:south_asia
        }
        order_by = {
            add = { value = military_strength }
            add = { value = monthly_income_trade_and_tax }
        }
        max = 1
        check_range_bounds = no
        situation:conquest_of_india = {
            set_variable = {
                name = strongest_european_power
                value = prev
            }
        }
        situation:conquest_of_india = {
            set_variable = {
                name = sep_locations
                value = 0
            }
        }
        # save number of locations in india
        sub_continent:south_asia = {
            every_location_in_sub_continent = {
                limit = {
                    owner ?= {
                        top_overlord_or_this ?= situation:conquest_of_india.var:strongest_european_power
                    }
                }
                situation:conquest_of_india = {
                    change_variable = {
                        name = sep_locations
                        add = 1
                    }
                }
            }
        }
        # get percentage of total
        situation:conquest_of_india = {
            set_variable = {
                name = sep_location_percentage
                value = {
                    value = var:sep_locations
                    divide = 2587
                }
            }
        }
    }
}

# total locations in south asia = 2587