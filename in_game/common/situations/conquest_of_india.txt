conquest_of_india = {
    monthly_spawn_chance = monthly_spawn_chance_unique
    hint_tag = hint_conquest_of_india
    
    can_start = {
        current_age_or_later = { age = age_5_absolutism }
        any_country = {
            capital ?= { continent = continent:europe }
            has_presence_in = sub_continent:south_asia
        }
    }
    
    can_end = {
        not = {
            any_country = {
                capital ?= { continent = continent:europe }
                has_presence_in = sub_continent:south_asia
            }
        }
    }
    
    visible = {
        has_presence_in = sub_continent:south_asia
    }

    on_start = {
        conquest_of_india_recalculate_strongest = yes

        # europeans
        every_country = {
            limit = {
                capital ?= { continent = continent:europe }
                has_presence_in = sub_continent:south_asia
            }
            trigger_event_non_silently = conquest_of_india.1
        }

        # indians
        every_country = {
            limit = { culture = { has_culture_group = culture_group:indian_group } }
            trigger_event_non_silently = conquest_of_india.2
        }
    }

    on_monthly = {
        conquest_of_india_recalculate_strongest = yes

        random_list = {
            # reject european institutions
            5 = { 
                every_country = {
                    limit = {
                        culture = { has_culture_group = culture_group:indian_group }
                    }
                    trigger_event_non_silently = conquest_of_india.3
                }
            }
            95 = {}
        }
    }

    on_ended = {}

    tooltip = {
        # colonizer
        if = {
            limit = {
                owner ?= {
                    capital ?= { continent = continent:europe }
                    has_presence_in = sub_continent:south_asia
                }
            }
            custom_tooltip = htc_coi_colonizer_tt
        }
        # indian
        else_if = {
            limit = {
                owner ?= {
                    culture = { has_culture_group = culture_group:indian_group }
                }
            }
            custom_tooltip = htc_coi_indian_tt
        }
        # subject of colonizer
        else_if = {
            limit = {
                owner ?= {
                    capital ?= { sub_continent = sub_continent:south_asia }
                    is_subject = yes
                    overlord = { capital ?= { continent = continent:europe } }
                }
            }
            custom_tooltip = htc_coi_subject_of_colonizer_tt
        }
        else = {
            custom_tooltip = htc_coi_spectator_tt
        }
    }

    map_color = {
        if = {
            limit = {
                owner ?= {
                    capital ?= { continent = continent:europe }
                    has_presence_in = sub_continent:south_asia
                    is_subject = no
                }
            }
            value = owner.country_color
        }
        else_if = {
            limit = {
                owner ?= {
                    culture = { has_culture_group = culture_group:indian_group }
                    is_subject = no
                }
            }
			value = situation:conquest_of_india.var:strongest_indian_power.country_color
        }
    }
    
    overlord = {
        capital ?= { continent = continent:europe }
        has_presence_in = sub_continent:south_asia
    }

    secondary_map_color = {
        # european subject in india
        if = {
            limit = {
                owner ?= {
                    is_subject = yes
                    capital ?= { sub_continent = sub_continent:south_asia }
                    overlord ?= {
                        capital ?= { continent = continent:europe }
                        has_presence_in = sub_continent:south_asia
                    }
                }
            }
            value = owner.overlord.country_color
        }
        # indian subject in india
        else_if = {
            limit = {
                owner ?= {
                    is_subject = yes
                    capital ?= { sub_continent = sub_continent:south_asia }
                    overlord = {
                        culture = { has_culture_group = culture_group:indian_group }
                    }
                }
            }
            value = situation:conquest_of_india.var:strongest_indian_power.country_color
        }
    }
}
